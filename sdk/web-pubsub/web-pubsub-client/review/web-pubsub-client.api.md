## API Report File for "@azure/web-pubsub-client"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

/// <reference types="node" />

import { AbortSignalLike } from '@azure/abort-controller';
import { CloseEvent } from 'ws';

// @public
export interface AckMessage extends WebPubSubMessageBase {
    ackId: number;
    error?: ErrorDetail;
    readonly kind: DownstreamMessageType.Ack;
    success: boolean;
}

// @public
export interface AckResult {
    ackId: number;
}

// @public
export type ClientAccessUriProvider = (abortSignal?: AbortSignalLike) => Promise<string>;

// @public
export interface ConnectedMessage extends WebPubSubMessageBase {
    connectionId: string;
    readonly kind: DownstreamMessageType.Connected;
    reconnectionToken: string;
    userId: string;
}

// @public
export class DefaultWebPubSubClientCredential implements WebPubSubClientCredential {
    constructor(clientAccessUri: string);
    constructor(clientAccessUriProvider: ClientAccessUriProvider);
    getClientAccessUrl(abortSignal?: AbortSignalLike): Promise<string>;
}

// @public
export interface DisconnectedMessage extends WebPubSubMessageBase {
    readonly kind: DownstreamMessageType.Disconnected;
    message: string;
}

// @public
export enum DownstreamMessageType {
    Ack = "ack",
    Connected = "connected",
    Disconnected = "disconnected",
    GroupData = "groupData",
    ServerData = "serverData"
}

// @public
export interface ErrorDetail {
    message: string;
    name: string;
}

// @public
export interface GroupDataMessage extends WebPubSubMessageBase {
    data: JSONTypes | ArrayBuffer;
    dataType: WebPubSubDataType;
    fromUserId: string;
    group: string;
    readonly kind: DownstreamMessageType.GroupData;
    sequenceId?: number;
}

// @public
export interface JoinGroupMessage extends WebPubSubMessageBase {
    ackId?: number;
    group: string;
    readonly kind: UpstreamMessageType.JoinGroup;
}

// @public
export interface JoinGroupOptions {
    abortSignal?: AbortSignalLike;
    ackId?: number;
}

// @public
export type JSONTypes = string | number | boolean | object;

// @public
export interface LeaveGroupMessage extends WebPubSubMessageBase {
    ackId?: number;
    group: string;
    readonly kind: UpstreamMessageType.LeaveGroup;
}

// @public
export interface LeaveGroupOptions {
    abortSignal?: AbortSignalLike;
    ackId?: number;
}

// @public
export type OnConnected = (args: OnConnectedArgs) => Promise<void>;

// @public
export interface OnConnectedArgs {
    groupRestoreState: Map<string, Error | null>;
    message: ConnectedMessage;
}

// @public
export type OnDisconnected = (args: OnDisconnectedArgs) => Promise<void>;

// @public
export interface OnDisconnectedArgs {
    event?: CloseEvent;
    message?: DisconnectedMessage;
}

// @public
export interface OnGroupDataMessageArgs {
    message: GroupDataMessage;
}

// @public
export type OnGroupMessage = (args: OnGroupDataMessageArgs) => Promise<void>;

// @public
export interface OnServerDataMessageArgs {
    message: ServerDataMessage;
}

// @public
export type OnServerMessage = (args: OnServerDataMessageArgs) => Promise<void>;

// @public
export interface OnStoppedArgs {
}

// @public
export interface ReconnectionOptions {
    autoReconnect: boolean;
}

// @public
export interface SendEventMessage extends WebPubSubMessageBase {
    ackId?: number;
    data: JSONTypes | ArrayBuffer;
    dataType: WebPubSubDataType;
    event: string;
    readonly kind: UpstreamMessageType.SendEvent;
}

// @public
export interface SendEventOptions {
    abortSignal?: AbortSignalLike;
    ackId?: number;
    fireAndForget: boolean;
}

// @public
export class SendMessageError extends Error {
    constructor(message: string, ackId?: number, errorDetail?: ErrorDetail);
    ackId?: number;
    errorDetail?: ErrorDetail;
    name: string;
}

// @public
export interface SendToGroupMessage extends WebPubSubMessageBase {
    ackId?: number;
    data: JSONTypes | ArrayBuffer;
    dataType: WebPubSubDataType;
    group: string;
    readonly kind: UpstreamMessageType.SendToGroup;
    noEcho: boolean;
}

// @public
export interface SendToGroupOptions {
    abortSignal?: AbortSignalLike;
    ackId?: number;
    fireAndForget: boolean;
    noEcho: boolean;
}

// @public
export interface SequenceAckMessage extends WebPubSubMessageBase {
    readonly kind: UpstreamMessageType.SequenceAck;
    sequenceId: number;
}

// @public
export interface ServerDataMessage extends WebPubSubMessageBase {
    data: JSONTypes | ArrayBuffer;
    dataType: WebPubSubDataType;
    readonly kind: DownstreamMessageType.ServerData;
    sequenceId?: number;
}

// @public
export enum UpstreamMessageType {
    JoinGroup = "joinGroup",
    LeaveGroup = "leaveGroup",
    SendEvent = "sendEvent",
    SendToGroup = "sendToGroup",
    SequenceAck = "sequenceAck"
}

// @public
export class WebPubSubClient {
    constructor(clientAccessUri: string, options?: WebPubSubClientOptions);
    constructor(credential: WebPubSubClientCredential, options?: WebPubSubClientOptions);
    joinGroup(groupName: string, options?: JoinGroupOptions): Promise<AckResult>;
    leaveGroup(groupName: string, options?: LeaveGroupOptions): Promise<AckResult>;
    // (undocumented)
    off(event: "connected", listener: (e: OnConnectedArgs) => void): void;
    // (undocumented)
    off(event: "disconnected", listener: (e: OnDisconnectedArgs) => void): void;
    // (undocumented)
    off(event: "stopped", listener: (e: OnStoppedArgs) => void): void;
    // (undocumented)
    off(event: "server-message", listener: (e: OnServerDataMessageArgs) => void): void;
    // (undocumented)
    off(event: "group-message", listener: (e: OnGroupDataMessageArgs) => void): void;
    // (undocumented)
    on(event: "connected", listener: (e: OnConnectedArgs) => void): void;
    // (undocumented)
    on(event: "disconnected", listener: (e: OnDisconnectedArgs) => void): void;
    // (undocumented)
    on(event: "stopped", listener: (e: OnStoppedArgs) => void): void;
    // (undocumented)
    on(event: "server-message", listener: (e: OnServerDataMessageArgs) => void): void;
    // (undocumented)
    on(event: "group-message", listener: (e: OnGroupDataMessageArgs) => void): void;
    sendEvent(eventName: string, content: JSONTypes | ArrayBuffer, dataType: WebPubSubDataType, options?: SendEventOptions): Promise<void | AckResult>;
    sendToGroup(groupName: string, content: JSONTypes | ArrayBuffer, dataType: WebPubSubDataType, options?: SendToGroupOptions): Promise<void | AckResult>;
    start(abortSignal?: AbortSignalLike): Promise<void>;
    stop(): void;
}

// @public
export interface WebPubSubClientCredential {
    getClientAccessUrl(abortSignal?: AbortSignalLike): Promise<string>;
}

// @public
export interface WebPubSubClientOptions {
    protocol: WebPubSubClientProtocol;
    reconnectionOptions: ReconnectionOptions;
}

// @public
export interface WebPubSubClientProtocol {
    readonly isReliableSubProtocol: boolean;
    readonly name: string;
    parseMessages(input: string | ArrayBuffer | Buffer): WebPubSubMessage;
    writeMessage(message: WebPubSubMessage): string | ArrayBuffer;
}

// @public
export enum WebPubSubDataType {
    Binary = "binary",
    Json = "json",
    Protobuf = "protobuf",
    Text = "text"
}

// @public (undocumented)
export const WebPubSubJsonProtocol: () => WebPubSubClientProtocol;

// @public (undocumented)
export const webPubSubJsonReliableProtocol: () => WebPubSubClientProtocol;

// @public (undocumented)
export type WebPubSubMessage = GroupDataMessage | ServerDataMessage | JoinGroupMessage | LeaveGroupMessage | ConnectedMessage | DisconnectedMessage | SendToGroupMessage | SendEventMessage | SequenceAckMessage | AckMessage;

// @public
export interface WebPubSubMessageBase {
    // (undocumented)
    kind: DownstreamMessageType | UpstreamMessageType;
}

// (No @packageDocumentation comment for this package)

```
