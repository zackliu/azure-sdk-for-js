## API Report File for "@azure/web-pubsub-client"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

/// <reference types="node" />

import { AbortSignalLike } from '@azure/abort-controller';
import { CloseEvent } from 'ws';

// @public
export interface AckMessage extends WebPubSubMessage {
    ackId: number;
    error?: ErrorDetail;
    success: boolean;
    readonly _type: DownstreamMessageType.Ack;
}

// @public
export interface AckResult {
    ack: AckMessage;
}

// @public
export type ClientAccessUriProvider = (abortSignal?: AbortSignalLike) => Promise<string>;

// @public
export interface ConnectedMessage extends WebPubSubMessage {
    connectionId: string;
    reconnectionToken: string;
    readonly _type: DownstreamMessageType.Connected;
    userId: string;
}

// @public
export interface DataMessage extends WebPubSubMessage {
    data: JSONTypes | ArrayBuffer;
    dataType: WebPubSubDataType;
    sequenceId?: number;
}

// @public
export class DefaultWebPubSubClientCredential implements WebPubSubClientCredential {
    constructor(clientAccessUri: string);
    constructor(clientAccessUriProvider: ClientAccessUriProvider);
    getClientAccessUri(abortSignal?: AbortSignalLike): Promise<string>;
}

// @public
export interface DisconnectedMessage extends WebPubSubMessage {
    message: string;
    readonly _type: DownstreamMessageType.Disconnected;
}

// @public
export enum DownstreamMessageType {
    Ack = "ack",
    Connected = "connected",
    Disconnected = "disconnected",
    GroupData = "groupData",
    ServerData = "serverData"
}

// @public
export interface ErrorDetail {
    message: string;
    name: string;
}

// @public
export interface GroupDataMessage extends DataMessage {
    fromUserId: string;
    group: string;
    readonly _type: DownstreamMessageType.GroupData;
}

// @public
export interface GroupsInfo {
    groups: string[];
}

// @public
export interface JoinGroupMessage extends WebPubSubMessage {
    ackId?: number;
    group: string;
    readonly _type: UpstreamMessageType.JoinGroup;
}

// @public
export type JSONTypes = string | number | boolean | object;

// @public
export interface LeaveGroupMessage extends WebPubSubMessage {
    ackId?: number;
    group: string;
    readonly _type: UpstreamMessageType.LeaveGroup;
}

// @public
export type OnConnected = (args: OnConnectedArgs) => Promise<void>;

// @public
export interface OnConnectedArgs {
    groupsInfo: GroupsInfo;
    message: ConnectedMessage;
}

// @public
export type OnDisconnected = (args: OnDisconnectedArgs) => Promise<void>;

// @public
export interface OnDisconnectedArgs {
    event?: CloseEvent;
    message?: DisconnectedMessage;
}

// @public
export interface OnGroupDataMessageArgs {
    message: GroupDataMessage;
}

// @public
export type OnGroupMessage = (args: OnGroupDataMessageArgs) => Promise<void>;

// @public
export interface OnServerDataMessageArgs {
    message: ServerDataMessage;
}

// @public
export type OnServerMessage = (args: OnServerDataMessageArgs) => Promise<void>;

// @public
export interface ReconnectionOptions {
    autoReconnect: boolean;
    autoRejoinGroups: boolean;
}

// @public
export interface SendEventMessage extends WebPubSubMessage {
    ackId?: number;
    data: JSONTypes | ArrayBuffer;
    dataType: WebPubSubDataType;
    event: string;
    readonly _type: UpstreamMessageType.SendEvent;
}

// @public (undocumented)
export class SendMessageError extends Error {
    constructor(message: string, ackMessage?: AckMessage);
    // (undocumented)
    ackMessage?: AckMessage;
    // (undocumented)
    name: string;
}

// @public
export interface SendToGroupMessage extends WebPubSubMessage {
    ackId?: number;
    data: JSONTypes | ArrayBuffer;
    dataType: WebPubSubDataType;
    group: string;
    noEcho: boolean;
    readonly _type: UpstreamMessageType.SendToGroup;
}

// @public
export interface SendToGroupOptions {
    fireAndForget: boolean;
    noEcho: boolean;
}

// @public
export interface SendToServerOptions {
    fireAndForget: boolean;
}

// @public
export interface SequenceAckMessage extends WebPubSubMessage {
    sequenceId: number;
    readonly _type: UpstreamMessageType.SequenceAck;
}

// @public
export interface ServerDataMessage extends DataMessage {
    readonly _type: DownstreamMessageType.ServerData;
}

// @public
export enum UpstreamMessageType {
    JoinGroup = "joinGroup",
    LeaveGroup = "leaveGroup",
    SendEvent = "sendEvent",
    SendToGroup = "sendToGroup",
    SequenceAck = "sequenceAck"
}

// @public
export class WebPubSubClient {
    constructor(clientAccessUri: string, options?: WebPubSubClientOptions);
    constructor(credential: WebPubSubClientCredential, options?: WebPubSubClientOptions);
    joinGroup(groupName: string, ackId?: number, abortSignal?: AbortSignalLike): Promise<AckResult>;
    leaveGroup(groupName: string, ackId?: number, abortSignal?: AbortSignalLike): Promise<AckResult>;
    onConnected?: OnConnected;
    onDisconnected?: OnDisconnected;
    onGroupMessage(...args: [
    calback: OnGroupMessage
    ] | [
    groupName: string,
    calback: OnGroupMessage
    ]): void;
    onServerMessage?: OnServerMessage;
    sendToGroup(groupName: string, content: JSONTypes | ArrayBuffer, dataType: WebPubSubDataType, ackId?: number, options?: SendToGroupOptions, abortSignal?: AbortSignalLike): Promise<void | AckResult>;
    sendToServer(eventName: string, content: JSONTypes | ArrayBuffer, dataType: WebPubSubDataType, ackId?: number, options?: SendToServerOptions, abortSignal?: AbortSignalLike): Promise<void | AckResult>;
    start(abortSignal?: AbortSignalLike): Promise<void>;
    stop(): void;
}

// @public
export interface WebPubSubClientCredential {
    getClientAccessUri(abortSignal?: AbortSignalLike): Promise<string>;
}

// @public
export interface WebPubSubClientOptions {
    protocol: WebPubSubClientProtocol;
    reconnectionOptions: ReconnectionOptions;
}

// @public (undocumented)
export interface WebPubSubClientProtocol {
    isReliableSubProtocol: boolean;
    name: string;
    parseMessages(input: string | ArrayBuffer | Buffer): WebPubSubMessage;
    writeMessage(message: WebPubSubMessage): string | ArrayBuffer;
}

// @public
export enum WebPubSubDataType {
    Binary = "binary",
    Json = "json",
    Protobuf = "protobuf",
    Text = "text"
}

// @public
export class WebPubSubJsonProtocol implements WebPubSubClientProtocol {
    isReliableSubProtocol: boolean;
    name: string;
    parseMessages(input: string): WebPubSubMessage;
    writeMessage(message: WebPubSubMessage): string;
}

// @public
export class WebPubSubJsonReliableProtocol implements WebPubSubClientProtocol {
    isReliableSubProtocol: boolean;
    name: string;
    parseMessages(input: string): WebPubSubMessage;
    writeMessage(message: WebPubSubMessage): string;
}

// @public
export interface WebPubSubMessage {
    // (undocumented)
    _type: DownstreamMessageType | UpstreamMessageType;
}

// (No @packageDocumentation comment for this package)

```
